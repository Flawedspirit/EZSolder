function slugify(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\u0100-\uFFFF\w\-]/g,"-").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function fileUpload(e){file=e.target.files,$("#file-button").attr("value","Uploading "+file[0].name)}function validate(){var e=[];return"dest-other"==$modtype.val()&&""==$("#otherfield").val()&&(e.push('A directory name must be entered if "other" is selected.'),$otherfield.focus()),""==$modfile.val()&&e.push("You must choose a file to upload."),""==$modversion.val()&&(e.push("A version string must be entered."),$modversion.focus()),""==$modslug.val()&&(e.push("A mod slug must be entered."),$modtype.focus()),""==$modrepo.val()&&e.push("The mod repository path must be entered."),e.length>0?($("#val-errors p").empty(),$("#val-errors span").remove(),$("#val-errors").removeAttr("style"),$("#val-errors p").append("<strong>Please fix these issues and try again:</strong><br />"),$.each(e,function(e,o){$("#val-errors p").append(o+"<br />"),o=""}),$("#val-errors").prepend('<span class="icon-error"></span>'),!1):($("#val-errors").attr("style","display: none;"),!0)}var upload_version,$modrepo=$("#repository"),$modname=$("#modname"),$modauthor=$("#modauthor"),$modslug=$("#modslug"),$modversion=$("#modversion"),$mcversion=$("#mcversion"),$modfile=$("#file"),$modtype=$("#type"),$otherfield=$("#otherfield");$modname.on("change textInput input",function(){$modslug.val(slugify($modname.val()))}),$modslug.autocomplete({source:"includes/search.php",minLength:3}),$modfile.on("change",fileUpload),$modtype.change(function(){$otherfield.prop("disabled",!("dest-other"==$("#type").val()))}),$("input").on("change textInput input",function(){$modslug.val()&&$modversion.val()&&$modfile[0].files?($("#upload-info").show(),upload_version=$("#use-mc-version").prop("checked")?"-mc"+$mcversion.val()+"-"+$modversion.val():"-"+$modversion.val(),$("#file-to-upload").html("<b>&lt;repository&gt;/"+$modslug.val()+"/"+$modslug.val()+upload_version+".zip</b>")):$("#upload-info").hide()}),$("input[type=reset]").click(function(){$otherfield.prop("disabled",!0),location.reload()});